分布式
    分布式架构
        需要解决的问题
            大规模服务化之前，应用可能只是通过RMI或Hessian等工具，简单的暴露和引用远程服务，通过配置服务的URL地址进行调用，通过F5等硬件进行负载均衡。
            (1) 当服务越来越多时，服务URL配置管理变得非常困难，F5硬件负载均衡器的单点压力也越来越大。
                此时需要一个服务注册中心，动态的注册和发现服务，使服务的位置透明。
                并通过在消费方获取服务提供方地址列表，实现软负载均衡和Failover，降低对F5硬件负载均衡器的依赖，也能减少部分成本。
            (2) 当进一步发展，服务间依赖关系变得错踪复杂。
            (3) 接着，服务的调用量越来越大，服务的容量问题就暴露出来，这个服务需要多少机器支撑？什么时候该加机器？
                为了解决这些问题，第一步，要将服务现在每天的调用量，响应时间，都统计出来，作为容量规划的参考指标。
                其次，要可以动态调整权重，
        Dubbo维护调用关系
            分支主题
        1.单一应用框架(ORM) 
            缺点：单一的系统架构，使得在开发过程中，占用的资源越来越多，而且随着流量的增加越来越难以维护 
        2.垂直应用框架(MVC) 
            垂直应用架构解决了单一应用架构所面临的扩容问题，流量能够分散到各个子系统当中，且系统的体积可控，一定程度上降低了开发人员之间协同以及维护的成本，提升了开发效率。 
            缺点：但是在垂直架构中相同逻辑代码需要不断的复制，不能复用。 
            架构图
                分支主题
        集群架构
        3.分布式应用架构(RPC) 
            当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心
        4.流动计算架构(SOA) 
            引入企业服务总线ESB屏蔽服务接口的访问差异**
        微服务架构
            引入容器化技术
            以云平台承载系统
            小型功能区块模块化
            语言无关
        微服务和soa的区别
            设计思想
            实现方式
                微服务去除了esb服务总线使用restAPI
                soa水平划分，微服务垂直划分
                进程隔离
    分布式机器底层
        分布式操作系统
            组织
            Amoeba
        分布式系统通信
            消息传送
            组通信
                概念
                实现
                可靠性
            远程过程调用
                RPC基本操作
                参数传递
                RPC语义
                DEC/RPC
            远程对象方法调用
                客户与对象绑定
                远程方法调用
            计算机网络与中间件
                网络操作系统
                分布式系统中间件
                中间件LSF
            事件与通知
                分布式事件通知
                Jini时间通知
        网络存储技术
            存储设备接入标准
                SCSI结构模型
                SCSI命令集
                SCSI消息系统
                SCSI任务管理
            光通道技术
                光通道协议层
                光通道拓扑结构
                光通道信息单元
                光通道链路服务
            附网存储器和存储域网
                存储域网
                附网存储
            基于IP的存储域网
                iSCSI
                IP网承载光通道FCIP
        分布式进程
            分布式进程概述
                进程与多线程
                分布式进程创建
            进程远程执行
                远程执行概念
                远程执行REXEC
            进程迁移
                概念与过程
                策略：动态负载平衡
                实现
            分布式对象
                对象生成与适配
                特点
        计算
            分布式计算的模式
            一个业务流程，多个系统来执行
            多个任务，多个节点执行
            分步计算的定义与挑战
                分布计算系统的定义
                分布计算系统的要求
                分布计算系统的应用
            分步计算系统的互连
                共享存储器多处理机系统
                同构多计算机系统
                异构多计算机系统
        名字服务
            名字服务结构
                名字与属性
                名字空间
                名字服务器
                名字解析
            域名系统
                域名空间
                资源记录与主文件
                域名服务器
                域名解析器
            目录服务 X.500
                模型
                操作
                协议
                轻量目录访问协议
            活动目录域服务
                ADDS结构模型
                域控制器
                企业ADDS部署示例
    分布式原理
        解决思路
            分片（partition）
            冗余（replication） 副本机制
        出发点
            高性能（hign performance）
                高吞吐
                低延迟
                高并发
            高可用（hign available）
                高成功率（正常服务时间占比、请求成功次数比例）
            可扩展（scalability）（可伸缩）
        分布式理论
            Consistency
                线性一致性
                顺序一致性
                    ZooKeeper实现的一致性
                弱一致性
                    最终一致性
                        因果一致性
                        读己所写一致性
                        会话一致性
                        单调读一致性
                        单调写一致性
            Consenus
            分布式协议
                分布一致性
                    分布式事务
                        推荐框架
                            JTA
                            seata
                            RocketMQ
                X/Open Specification(XA规范)
                    本地事务
                    全局事务
                二阶段提交协议
                    图示
                        正常状态
                        失败状态
                        Fail-stop Failures模型
                    角色
                        Coordinator（协调者）
                        Participant（参与者，也叫 Voter 投票者）
                    阶段
                        1. Commit request phase
                        2. Commit phase
                    细节描述
                        1. 提交请求阶段
                        2. 提交阶段
                            提交事务
                            中断事务
                    Crash模型
                        协调者Crash，参与者正常
                        协调者正常，参与者Crash
                            参与者无法恢复
                            参与者可恢复
                        协调者Crash，参与者Crash
                            协调者与参与者在第一阶段Crash
                            协调者在第二阶段Crash
                                参与者在agree阶段Crash
                                参与者在commit阶段Crash
                    Fail-stop Failures模型
                三阶段提交协议
                    图片示例
                        正常状态
                        异常状态
                    细节描述
                        CanCommit
                        PreCommit
                            所有参与者反馈agree
                            有参与者响应超时，或者反馈aborted
                        DoCommit
                            所有参与者反馈agree
                            有参与者超时，或者反馈aborted
                    Network Partition（网络分区情况）
                TCC提交协议
                    Try
                        完成业务检查、预留业务资源
                    Confirm
                        使用预留的资源执行业务操作（需要保证幂等性）
                    Cancle
                        取消执行业务操作，释放预留的资源（需要保证幂等性）
                Paxos算法
                    假设A、B、C三个节点
                    1. Prepare 阶段
                    2. Accept 阶段
            ACID
            CAP
                Consistence（一致性）
                Availability（可用性）
                Partition Tolerance（分区容错性）
                CAP 伪二分法
                    原因
                    重CA轻P
                    重CP轻A
                    重AP轻C
                ACID与CAP一致性区别
                    ACID 
                        内部一致性注重于事务前后数据的完整性
                        节点服务器的数据完整性
                        本质区别
                    CAP
                        外部一致性则注重于读写数据或主从数据的一致性
                        分布式多服务器之间复制数据以取得这些服务器拥有同样的数据，这是一种分布式领域的一致性概念
                        本质区别
                            可线性化
            BASE
                Basically Available（基本可用）
                Soft State（软状态）
                Eventually Consistent（最终一致性）
    主题
        第一次演进：Tomcat与数据库分开部署